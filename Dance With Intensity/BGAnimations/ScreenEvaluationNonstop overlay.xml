<ActorFrame><children>
	<Layer
		Font="_sg stroke"
		Text="0"
		InitCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y+140;zoom,0.5"
		OnCommand="%function(self)
			self:settext( 'SCORE' )
		end"
		/>
	<Layer
		Font="_sg stroke"
		Text="0"
		InitCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y+160;zoom,0.5"
		OnCommand="%function(self)
			self:settext( 'PERCENTAGE' )
		end"
		/>
	<Layer
		Font="_score"
		Text="0"
		Condition="GAMESTATE:IsHumanPlayer(PLAYER_1)"
		InitCommand="diffuse,68/255,187/255,238/255,1;x,SCREEN_CENTER_X-60;y,SCREEN_CENTER_Y+140;zoom,1;horizalign,right;draworder,90;sleep,0.1;queuecommand,ShowScore"
		ScoreChangedP1MessageCommand="%function(self)
			self:settext( GetScore(PLAYER_1) )
		end"
		ShowScoreCommand="%function(self)
			self:settext( GetScore(PLAYER_1) )
			self:zoom(0)
			self:sleep(0.2*7)
			self:bounceend(0.4)
			self:zoom(1)
		end"
		/>

	<Layer
		Font="_gpscore P1"
		Text=" 0.00%"
		InitCommand="x,SCREEN_CENTER_X-60;y,SCREEN_CENTER_Y+160;zoom,1;horizalign,right;draworder,90;sleep,0.1;"
		Condition="GAMESTATE:IsPlayerEnabled(PLAYER_1)"
		OnCommand="%function(self)
		local Pr = PROFILEMAN:GetMachineProfile():GetSaved()
			if FUCK_EXE and STATSMAN:GetCurStageStats() then
				if GAMESTATE:IsPlayerEnabled(PLAYER_1) then
					local poss = STATSMAN:GetCurStageStats():GetPlayerStageStats(PLAYER_1):GetPossibleDancePoints()
					local act = STATSMAN:GetCurStageStats():GetPlayerStageStats(PLAYER_1):GetActualDancePoints()
					self:settext(FormatPercentScore(act/poss))
				end
			end
		self:queuecommand('ShowScore')
		end"
			ShowScoreCommand="%function(self)
			self:zoom(0)
			self:sleep(0.2*7)
			self:bounceend(0.4)
			self:zoom(1)
		end"
		/>

	<Layer
		Font="_score"
		Text="0"
		Condition="GAMESTATE:IsHumanPlayer(PLAYER_2)"
		InitCommand="diffuse,238/255,221/255,0,1;x,SCREEN_CENTER_X+60;y,SCREEN_CENTER_Y+140;zoom,1;horizalign,left;draworder,90;sleep,0.1;queuecommand,ShowScore"
		ScoreChangedP1MessageCommand="%function(self)
			self:settext( GetScore(PLAYER_2) )
		end"
		ShowScoreCommand="%function(self)
			self:settext( GetScore(PLAYER_2) )
			self:zoom(0)
			self:sleep(0.2*7)
			self:bounceend(0.4)
			self:zoom(1)
		end"
		/>

	<Layer
		Font="_gpscore P2"
		Text=" 0.00%"
		InitCommand="x,SCREEN_CENTER_X+60;y,SCREEN_CENTER_Y+160;zoom,1;horizalign,left;draworder,90;sleep,0.1"
		Condition="GAMESTATE:IsPlayerEnabled(PLAYER_2)"
		OnCommand="%function(self)
		local Pr = PROFILEMAN:GetMachineProfile():GetSaved()
			if FUCK_EXE and STATSMAN:GetCurStageStats() then
				if GAMESTATE:IsPlayerEnabled(PLAYER_2) then
					local poss = STATSMAN:GetCurStageStats():GetPlayerStageStats(PLAYER_2):GetPossibleDancePoints()
					local act = STATSMAN:GetCurStageStats():GetPlayerStageStats(PLAYER_2):GetActualDancePoints()
					self:settext(FormatPercentScore(act/poss))
				end
			end
		self:queuecommand('ShowScore')
		end"
			ShowScoreCommand="%function(self)
			self:zoom(0)
			self:sleep(0.2*7)
			self:bounceend(0.4)
			self:zoom(1)
		end"
		/>



		<!-- VOICE JUDGMENT STUFF -->



        <Layer
                Type="Quad"
                OnCommand="queuecommand,PlaySound"
                PlaySoundCommand="%function(self)
                local Pr = PROFILEMAN:GetMachineProfile():GetSaved()
                RandomNumber = math.random(1,3)
                if Pr.DWIAnnouncer then
                    -- AAAA
                        if STATSMAN:GetBestGrade() == 0 then
                            SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/sss-00') )
                        end
                        -- AAA
                        if STATSMAN:GetBestGrade() >= 1 and STATSMAN:GetBestGrade() < 2 then
                            if RandomNumber == 1 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/ss-00') )
                            elseif RandomNumber == 2 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/ss-01') )
                            else
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/ss-00') )
                            end
                        end
                        -- AA and A
                        if STATSMAN:GetBestGrade() == 2 or STATSMAN:GetBestGrade() >= 2 and STATSMAN:GetBestGrade() <= 4 then
                            if RandomNumber == 1 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/a-00') )
                            elseif RandomNumber == 2 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/a-01') )
                            else
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/a-00') )
                            end
                        end
                        -- B
                        if STATSMAN:GetBestGrade() >= 4 and STATSMAN:GetBestGrade() < 5 then
                            if RandomNumber == 1 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/b-00') )
                            elseif RandomNumber == 2 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/b-04') )
                            else
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/b-00') )
                            end
                        end
                        -- C
                        if STATSMAN:GetBestGrade() >= 5 and STATSMAN:GetBestGrade() < 6 then
                            if RandomNumber == 1 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/c-00') )
                            elseif RandomNumber == 2 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/c-04') )
                            else
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/c-00') )
                            end
                        end
                        -- D
                        if STATSMAN:GetBestGrade() >= 7 and STATSMAN:GetBestGrade() < 8 then
                            if RandomNumber == 1 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/d-00') )
                            elseif RandomNumber == 2 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/d-01') )
                            else
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/d-00') )
                            end
                        end
                        -- E
                        if STATSMAN:GetBestGrade() >= 6 and STATSMAN:GetBestGrade() < 7 then
                            if RandomNumber == 1 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/d-00') )
                            elseif RandomNumber == 2 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/d-01') )
                            else
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/d-00') )
                            end
                        end
                        -- F
                        if STATSMAN:GetBestGrade() > 7 then
                            if RandomNumber == 1 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/e-00') )
                            elseif RandomNumber == 2 then
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/e-04') )
                            else
                                SOUND:PlayOnce( THEME:GetPath( EC_SOUNDS, '', 'Internal/eval/e-00') )
                            end
                        end
                end
                end"
        />

        <!-- ""Profile"" Picture and ""Game Periferal"" for P1-->
        <Layer
            Type="Quad"
            Condition="GAMESTATE:IsPlayerEnabled(PLAYER_1)"
            OnCommand="x,SCREEN_CENTER_X-285;y,SCREEN_CENTER_Y+210;zoomto,52,52,0,0;shadowlength,1"
            />
        <Layer
            Type="Quad"
            Condition="GAMESTATE:IsPlayerEnabled(PLAYER_1)"
            OnCommand="x,SCREEN_CENTER_X-285;y,SCREEN_CENTER_Y+210;zoomto,48,48,0,0;shadowlength,1;diffuse,0,0,0,1"
            />
           <Layer
		File="@ThemeFile('ProfileIcon/userP1')"
		Condition="GAMESTATE:IsHumanPlayer(PLAYER_1)"
		OnCommand="%function(self)
		self:x(SCREEN_CENTER_X-285)
		self:y(SCREEN_CENTER_Y+210)
		self:zoomto(50,50,0,0);
		end"
		/>
        <Layer
            Font="_sui generis"
            Text=" "
            Condition="GAMESTATE:IsHumanPlayer(PLAYER_1)"
            OnCommand="x,SCREEN_CENTER_X-250;y,SCREEN_CENTER_Y+230;zoom,0.5;horizalign,left;diffuse,#7f7f7f;shadowlength,1;sleep,0.01;queuecommand,Update"
            CurrentSongChangedMessageCommand="sleep,0.01;queuecommand,Update"
            UpdateCommand="%function(self)
            self:settext('Keyboard')
            end"
            />

           <!-- ""Profile"" Picture and ""Game Periferal"" for P2-->
        <Layer
            Type="Quad"
            Condition="GAMESTATE:IsPlayerEnabled(PLAYER_2)"
            OnCommand="x,SCREEN_CENTER_X+285;y,SCREEN_CENTER_Y+210;zoomto,52,52,0,0;shadowlength,1"
            />
           <Layer
            Type="Quad"
            Condition="GAMESTATE:IsPlayerEnabled(PLAYER_2)"
            OnCommand="x,SCREEN_CENTER_X+285;y,SCREEN_CENTER_Y+210;zoomto,48,48,0,0;shadowlength,1;diffuse,0,0,0,1"
            />
           <Layer
		File="@ThemeFile('ProfileIcon/userP2')"
		Condition="GAMESTATE:IsHumanPlayer(PLAYER_2)"
		OnCommand="%function(self)
		self:x(SCREEN_CENTER_X+285)
		self:y(SCREEN_CENTER_Y+210)
		self:zoomto(50,50,0,0);
		end"
		/>
        <Layer
            Font="_sui generis"
            Text=" "
            Condition="GAMESTATE:IsHumanPlayer(PLAYER_2)"
            OnCommand="x,SCREEN_CENTER_X+250;y,SCREEN_CENTER_Y+230;zoom,0.5;horizalign,right;diffuse,#7f7f7f;shadowlength,1;sleep,0.01;queuecommand,Update"
            CurrentSongChangedMessageCommand="sleep,0.01;queuecommand,Update"
            UpdateCommand="%function(self)
            self:settext('Keyboard')
            end"
            />

        <Layer File="OptionIcons.xml" OnCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y+205" />


        <!--

        <Layer
        Font="_sg stroke"
        Text="Pick a good tune!::Go for a high score!"
        InitCommand="x,SCREEN_CENTER_X-200;y,SCREEN_CENTER_Y-185;horizalign,right;zoom,0.35"
        OnCommand="%function(self)
            self:sleep(0.2)
            self:queuecommand('GetModText')
        end"
        GetModTextCommand="%function(self)
        	self:settext( 'Grade'.. FinalGrade(PLAYER_1) )
        end"
        />

        Grades.

        Yes, i know that it kinda sounds stupid that i don't let OITG handle this, but take this in consideration...
        OpenITG handles Score ratings into 20 grades. DWI only does 6.
        And so, if we let OITG handle the scores, sometimes getting a PFC is going to give you a simple AA.
        And not a AAA.
        											-- Jose_Varela
        	-->
        	<!--
        <Layer
        	File="@ThemeFile('ScreenEvaluation grades 8x1')"
        	Condition="GAMESTATE:IsPlayerEnabled(PLAYER_1)"
        	InitCommand="x,SCREEN_CENTER_X-226;y,SCREEN_CENTER_Y-140"
        	OnCommand="%function(self)
        	self:diffusealpha(1)
        	if FinalGrade(PLAYER_1) == 1 then
        		self:setstate(2)
        	elseif FinalGrade(PLAYER_1) >= 2 and FinalGrade <= 3 then
        		self:setstate(3)
        	elseif FinalGrade(PLAYER_1) >= 4 and FinalGrade <= 7 then
        		self:setstate(4)
        	elseif FinalGrade(PLAYER_1) >= 8 and FinalGrade <= 10 then
        		self:setstate(5)
        	elseif FinalGrade(PLAYER_1) >= 11 and FinalGrade <= 13 then
        		self:setstate(6)
        	elseif FinalGrade(PLAYER_1) >= 14 and FinalGrade <= 16 then
        		self:setstate(7)
        	elseif FinalGrade(PLAYER_1) >= 17 then
        		self:setstate(8)
        	else
        		self:diffusealpha(0)
        	end
        	end"
        	/>
        -->
</children></ActorFrame>